---
title: Go和sqlite3搭建的成绩系统
date: 2014-09-08 21:55:47
categories: 技术
tags:
---
大二上学期上的数据结构课，由于没有成绩系统，同学都无法得知homework和lab的分数，只有在期末时才知道，很不方便。因此即将到来的学期的数据结构课我想写一个成绩系统方便大家。  
![](http://ww1.sinaimg.cn/mw690/bf670632gw1e2qcyptbwjj.jpg)
<!-- more -->
实际上进行输出也就2天，打了一个星期的酱油进行了一些缓慢的学习。系统目前配置在SJTU-tcloud实验室的服务器上  
[点我进入该系统](http://tcloud.sjtu.edu.cn/course/se106/2014/grade/) (没账号也进不了╯‵□′)╯︵┻━┻  )



## 技术架构
语言上使用了`Golang`，数据库使用了`sqlite3`。  
两者我之前都没有使用过，主要还是想尝尝新鲜技术，Golang的话也是对Google的崇拜之情，语言设计者都是大牛所致。另外也尝试下将系统放在服务器上给人用的感觉。  
[点我查看项目代码](https://github.com/Azard/G0_2c0r3)  
另外还用到了  
* [https://github.com/mattn/go-session-manager](https://github.com/mattn/go-session-manager)
* [https://github.com/mattn/go-sqlite3](https://github.com/mattn/go-sqlite3)  

作者[mattn](https://github.com/mattn)是个霓虹人。  
项目本身难度并不大，甚至还不如数据库课的大作业。但考虑到真正使用，在密码加密，session判断身份和防XSS攻击上做了一些功夫，防止用户数据泄露。具体的设计细节就不做详细的介绍了，可以查看上面的项目代码链接。

## 对于Golang的吐槽
毕竟算是用Golang写了一个项目，稍微发表下对Golang开发web的看法。  
Google号称21世纪的C语言，个人感觉有点夸张了。以下几点是我对Go的负面观点：  
* `强制格式化`  这是一把双刃剑，一方面规范了代码的书写，另一方面也限制了程序员的自由发挥。  
最不能忍的一点就是连续空行最多一行，这让习惯了大段空行的人（例如我）感到十分不自由并且代码看起来不舒服。  
还有一点不能忍的就是
``` Go
if xxx {
	xxx
} else xxx {
	xxx
}
```
else和大括号强行在一行，让不人很不舒服（至少是我）。并且注释的开头空格也强行限制。
个人觉得这三点格式上Go可以做出一些让步。  
* `格式转换不易`  号称`21世纪的C语言`，在格式转换上至少应该十分智能，我开始是这样觉得的，但在使用过程中，就发现了很多地方非常不友好。  
在使用`crypto\md5`库的时候，竟然只能使用`[]byte`格式进行加密，而不能使用诸如`[16]byte`。从语言设计上看一个是静态一个是动态，但在使用过程中竟然如此不友好，并且从后者转换成前者十分不易，相比于格式转换十分方便的`C\C++`和`Java`只能说是语言的设计者没有做好。  

![](http://www.kankanews.com/ICkengine/wp-content/plugins/wp-o-matic/cache/2b89e8ce0a_03075938-jxdU.png)  
这张图片就是最近一篇将各个语言类比成武器的文章，文章中将Go比作一个每次发射一次要自己检查`if err != nil`的玩具枪，在开发了一个实际的系统后我感同身受。
当然，Go也是有很多优点的。诸如快捷的自动类型变量申明，简明的逻辑控制语法，便捷的`http`库，简明的路由分配等等。让开发者`不使用框架`也能很方便的开发web应用并且有一种一切`尽在掌握之中`的感觉。  

个人感觉Go的缺点和优点一样多，有些设计简直是为了特别而特别，让人（至少是我）感到用起来舒服，还有很多地方要修改。  

## 对于sqlite3的看法
由于之前数据库课程使用的`mysql`，突然使用`sqlite3`让我感到从负重20kg变成了零负重行走，从爬行变成了飞行。  
sqlite3作为嵌入式数据库，十分小巧敏捷。  
它对类型的忽视一方面减轻了数据库的体积，另一方面也让像我这种快速开发一个小型项目更方面。当然从企业级项目的角度考虑依然是`mysql`更加安全可靠。但在很多情况下，`sqlite3`也是一个不错的选择。
